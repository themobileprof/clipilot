name: modern_cli_tools_install
id: org.themobileprof.modern_cli_tools_install
version: 1.0.0
description: Install modern CLI tools (bat, eza, fd, ripgrep, fzf, tldr, htop) with individual selection
tags: [installer, composite, system-ops, development]
provides:
  - modern_cli_tools_installed
requires:
  - check_command_exists
size_kb: 12

flows:
  main:
    start: check_existing
    steps:
      check_existing:
        type: action
        message: "Checking installed modern CLI tools..."
        command: |
          echo "üöÄ Modern CLI Tools Installation"
          echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
          echo ""
          echo "Checking current installation status:"
          
          if command -v bat >/dev/null 2>&1 || command -v batcat >/dev/null 2>&1; then
            echo "  ‚úÖ bat: $(bat --version 2>&1 | head -1 || batcat --version 2>&1 | head -1)"
          else
            echo "  ‚ùå bat: not installed"
          fi
          
          if command -v eza >/dev/null 2>&1 || command -v exa >/dev/null 2>&1; then
            echo "  ‚úÖ eza/exa: $(eza --version 2>&1 | head -1 || exa --version 2>&1 | head -1)"
          else
            echo "  ‚ùå eza/exa: not installed"
          fi
          
          if command -v fd >/dev/null 2>&1; then
            echo "  ‚úÖ fd: $(fd --version 2>&1 | head -1)"
          else
            echo "  ‚ùå fd: not installed"
          fi
          
          if command -v rg >/dev/null 2>&1; then
            echo "  ‚úÖ ripgrep: $(rg --version 2>&1 | head -1)"
          else
            echo "  ‚ùå ripgrep: not installed"
          fi
          
          if command -v fzf >/dev/null 2>&1; then
            echo "  ‚úÖ fzf: $(fzf --version 2>&1)"
          else
            echo "  ‚ùå fzf: not installed"
          fi
          
          if command -v tldr >/dev/null 2>&1; then
            echo "  ‚úÖ tldr: $(tldr --version 2>&1 | head -1)"
          else
            echo "  ‚ùå tldr: not installed"
          fi
          
          if command -v htop >/dev/null 2>&1; then
            echo "  ‚úÖ htop: $(htop --version 2>&1 | head -1)"
          else
            echo "  ‚ùå htop: not installed"
          fi
          
          if command -v btop >/dev/null 2>&1; then
            echo "  ‚úÖ btop: installed"
          else
            echo "  ‚ùå btop: not installed"
          fi
          
          echo ""
        next: explain_process

      explain_process:
        type: action
        message: "Starting installation wizard..."
        command: |
          echo "üé® Modern CLI Tools Installation Wizard"
          echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
          echo ""
          echo "These are modern alternatives to classic Unix tools."
          echo "You will be asked about each tool individually."
          echo ""
          
          # Initialize selections
          echo "NONE" > /tmp/clipilot_selected_cli_tools.txt
        next: ask_bat

      ask_bat:
        type: instruction
        message: |
          
          ü¶á bat
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Modern replacement for 'cat' with syntax highlighting
          ‚Ä¢ Shows line numbers and git changes
          ‚Ä¢ Automatic paging for large files
          ‚Ä¢ Supports 200+ programming languages
          ‚Ä¢ Size: ~3 MB
          ‚Ä¢ Usage: bat file.py (instead of cat file.py)
          
        command: |
          read -p "Install bat? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "bat" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_eza

      ask_eza:
        type: instruction
        message: |
          
          üìÅ eza (modern ls)
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Modern replacement for 'ls' with colors and icons
          ‚Ä¢ Tree view, git status integration
          ‚Ä¢ Better permission display
          ‚Ä¢ Faster than traditional ls
          ‚Ä¢ Size: ~2 MB
          ‚Ä¢ Usage: eza -l (or alias ls='eza')
          
        command: |
          read -p "Install eza? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "eza" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_fd

      ask_fd:
        type: instruction
        message: |
          
          üîç fd
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Modern replacement for 'find' command
          ‚Ä¢ Simpler syntax, much faster
          ‚Ä¢ Respects .gitignore by default
          ‚Ä¢ Colored output
          ‚Ä¢ Size: ~2 MB
          ‚Ä¢ Usage: fd pattern (instead of find . -name pattern)
          
        command: |
          read -p "Install fd? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "fd" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_ripgrep

      ask_ripgrep:
        type: instruction
        message: |
          
          üîé ripgrep (rg)
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Modern replacement for 'grep' - extremely fast
          ‚Ä¢ Respects .gitignore automatically
          ‚Ä¢ Recursive by default
          ‚Ä¢ Colored output, multi-line search
          ‚Ä¢ Size: ~3 MB
          ‚Ä¢ Usage: rg "pattern" (instead of grep -r "pattern")
          
        command: |
          read -p "Install ripgrep? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "ripgrep" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_fzf

      ask_fzf:
        type: instruction
        message: |
          
          üéØ fzf
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Fuzzy finder for command line
          ‚Ä¢ Interactive filter for any list
          ‚Ä¢ Ctrl+R history search, file search
          ‚Ä¢ Integrates with vim, shell commands
          ‚Ä¢ Size: ~1 MB
          ‚Ä¢ Usage: command | fzf, or Ctrl+R for history
          
        command: |
          read -p "Install fzf? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "fzf" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_tldr

      ask_tldr:
        type: instruction
        message: |
          
          üìñ tldr
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Simplified man pages with practical examples
          ‚Ä¢ Community-driven documentation
          ‚Ä¢ Quick reference for common commands
          ‚Ä¢ Much easier to read than man pages
          ‚Ä¢ Size: ~5 MB
          ‚Ä¢ Usage: tldr tar (instead of man tar)
          
        command: |
          read -p "Install tldr? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "tldr" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_htop

      ask_htop:
        type: instruction
        message: |
          
          üìä htop
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Interactive process viewer (better than top)
          ‚Ä¢ Colored display, mouse support
          ‚Ä¢ Tree view of processes
          ‚Ä¢ Easy to kill/nice processes
          ‚Ä¢ Size: ~1 MB
          ‚Ä¢ Usage: htop (instead of top)
          
        command: |
          read -p "Install htop? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "htop" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: ask_btop

      ask_btop:
        type: instruction
        message: |
          
          üé® btop
          ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
          ‚Ä¢ Modern resource monitor (better than htop)
          ‚Ä¢ Beautiful UI with graphs
          ‚Ä¢ CPU, memory, disk, network monitoring
          ‚Ä¢ Mouse support, customizable themes
          ‚Ä¢ Size: ~5 MB
          ‚Ä¢ Usage: btop
          
        command: |
          read -p "Install btop? (Y/n): " -r
          echo
          if [[ ! $REPLY =~ ^[Nn]$ ]]; then
            echo "btop" >> /tmp/clipilot_selected_cli_tools.txt
            echo "YES"
          else
            echo "NO"
          fi
        next: confirm_selections

      confirm_selections:
        type: action
        message: "Reviewing selections..."
        command: |
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          if [ -z "$SELECTED" ]; then
            echo "NO_TOOLS_SELECTED"
          else
            echo ""
            echo "‚úì Selected tools for installation:"
            echo "$SELECTED" | while read tool; do
              case "$tool" in
                bat) echo "  ‚Ä¢ bat (better cat)" ;;
                eza) echo "  ‚Ä¢ eza (better ls)" ;;
                fd) echo "  ‚Ä¢ fd (better find)" ;;
                ripgrep) echo "  ‚Ä¢ ripgrep (better grep)" ;;
                fzf) echo "  ‚Ä¢ fzf (fuzzy finder)" ;;
                tldr) echo "  ‚Ä¢ tldr (simplified man)" ;;
                htop) echo "  ‚Ä¢ htop (process viewer)" ;;
                btop) echo "  ‚Ä¢ btop (resource monitor)" ;;
              esac
            done
            echo ""
            echo "TOOLS_SELECTED"
          fi
        next: branch_selections

      branch_selections:
        type: branch
        message: "Processing selections..."
        based_on: last_output
        branches:
          NO_TOOLS_SELECTED:
            next: installation_cancelled
          TOOLS_SELECTED:
            next: detect_package_manager
          default:
            next: installation_cancelled

      installation_cancelled:
        type: terminal
        message: |
          
          ‚ö†Ô∏è  No tools selected for installation.
          
          You can install modern CLI tools later by running:
            clipilot run modern_cli_tools_install

      detect_package_manager:
        type: action
        message: "Detecting package manager..."
        command: |
          if [ -n "$TERMUX_VERSION" ] || [ -d "$PREFIX" ]; then
            echo "TERMUX"
          elif command -v apt-get >/dev/null 2>&1; then
            echo "APT"
          elif command -v dnf >/dev/null 2>&1; then
            echo "DNF"
          elif command -v yum >/dev/null 2>&1; then
            echo "YUM"
          elif command -v pacman >/dev/null 2>&1; then
            echo "PACMAN"
          elif command -v brew >/dev/null 2>&1; then
            echo "BREW"
          else
            echo "UNKNOWN"
          fi
        next: branch_package_manager

      branch_package_manager:
        type: branch
        message: "Selecting installation method..."
        based_on: last_output
        branches:
          TERMUX:
            next: install_termux
          APT:
            next: install_apt
          DNF:
            next: install_dnf
          YUM:
            next: install_yum
          PACMAN:
            next: install_pacman
          BREW:
            next: install_brew
          default:
            next: install_unsupported

      install_termux:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools for Termux..."
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                pkg install -y bat
                ;;
              eza)
                echo "üì¶ Installing eza..."
                pkg install -y eza 2>/dev/null || pkg install -y exa
                ;;
              fd)
                echo "üì¶ Installing fd..."
                pkg install -y fd
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                pkg install -y ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                pkg install -y fzf
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                pkg install -y tldr
                ;;
              htop)
                echo "üì¶ Installing htop..."
                pkg install -y htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                pkg install -y btop
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_apt:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools (Debian/Ubuntu)..."
          echo ""
          
          sudo apt-get update
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                sudo apt-get install -y bat
                ;;
              eza)
                echo "üì¶ Installing eza..."
                if ! sudo apt-get install -y eza 2>/dev/null; then
                  echo "  Installing from cargo..."
                  command -v cargo >/dev/null 2>&1 && cargo install eza || echo "  Skipping eza (requires cargo)"
                fi
                ;;
              fd)
                echo "üì¶ Installing fd..."
                sudo apt-get install -y fd-find
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                sudo apt-get install -y ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                sudo apt-get install -y fzf
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                sudo apt-get install -y tldr 2>/dev/null || pip3 install tldr 2>/dev/null || echo "  Skipping tldr"
                ;;
              htop)
                echo "üì¶ Installing htop..."
                sudo apt-get install -y htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                sudo apt-get install -y btop 2>/dev/null || echo "  btop not available in repos"
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_dnf:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools (Fedora/RHEL)..."
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                sudo dnf install -y bat
                ;;
              eza)
                echo "üì¶ Installing eza..."
                sudo dnf install -y eza 2>/dev/null || cargo install eza 2>/dev/null || echo "  Skipping eza"
                ;;
              fd)
                echo "üì¶ Installing fd..."
                sudo dnf install -y fd-find
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                sudo dnf install -y ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                sudo dnf install -y fzf
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                sudo dnf install -y tldr 2>/dev/null || pip3 install tldr 2>/dev/null || echo "  Skipping tldr"
                ;;
              htop)
                echo "üì¶ Installing htop..."
                sudo dnf install -y htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                sudo dnf install -y btop
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_yum:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools (CentOS/RHEL)..."
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                sudo yum install -y bat 2>/dev/null || cargo install bat 2>/dev/null || echo "  Skipping bat"
                ;;
              eza)
                echo "üì¶ Installing eza..."
                cargo install eza 2>/dev/null || echo "  Skipping eza (requires cargo)"
                ;;
              fd)
                echo "üì¶ Installing fd..."
                sudo yum install -y fd-find 2>/dev/null || cargo install fd-find 2>/dev/null || echo "  Skipping fd"
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                sudo yum install -y ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                sudo yum install -y fzf 2>/dev/null || echo "  Skipping fzf"
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                pip3 install tldr 2>/dev/null || echo "  Skipping tldr"
                ;;
              htop)
                echo "üì¶ Installing htop..."
                sudo yum install -y htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                sudo yum install -y btop 2>/dev/null || echo "  Skipping btop"
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_pacman:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools (Arch Linux)..."
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                sudo pacman -S --noconfirm bat
                ;;
              eza)
                echo "üì¶ Installing eza..."
                sudo pacman -S --noconfirm eza
                ;;
              fd)
                echo "üì¶ Installing fd..."
                sudo pacman -S --noconfirm fd
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                sudo pacman -S --noconfirm ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                sudo pacman -S --noconfirm fzf
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                sudo pacman -S --noconfirm tldr
                ;;
              htop)
                echo "üì¶ Installing htop..."
                sudo pacman -S --noconfirm htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                sudo pacman -S --noconfirm btop
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_brew:
        type: action
        message: "Installing selected tools..."
        command: |
          echo "Installing modern CLI tools (macOS)..."
          echo ""
          
          SELECTED=$(cat /tmp/clipilot_selected_cli_tools.txt | grep -v "NONE" | sort | uniq)
          
          echo "$SELECTED" | while read tool; do
            case "$tool" in
              bat)
                echo "üì¶ Installing bat..."
                brew install bat
                ;;
              eza)
                echo "üì¶ Installing eza..."
                brew install eza
                ;;
              fd)
                echo "üì¶ Installing fd..."
                brew install fd
                ;;
              ripgrep)
                echo "üì¶ Installing ripgrep..."
                brew install ripgrep
                ;;
              fzf)
                echo "üì¶ Installing fzf..."
                brew install fzf
                ;;
              tldr)
                echo "üì¶ Installing tldr..."
                brew install tldr
                ;;
              htop)
                echo "üì¶ Installing htop..."
                brew install htop
                ;;
              btop)
                echo "üì¶ Installing btop..."
                brew install btop
                ;;
            esac
            echo ""
          done
          
          rm -f /tmp/clipilot_selected_cli_tools.txt
          echo "‚úÖ Selected tools installed successfully!"
        next: setup_aliases

      install_unsupported:
        type: terminal
        message: |
          
          ‚ùå Unsupported package manager
          
          You can install these tools manually or using cargo:
          
          cargo install bat eza fd-find ripgrep
          
          Visit these sites for installation instructions:
          ‚Ä¢ bat: https://github.com/sharkdp/bat
          ‚Ä¢ eza: https://github.com/eza-community/eza
          ‚Ä¢ fd: https://github.com/sharkdp/fd
          ‚Ä¢ ripgrep: https://github.com/BurntSushi/ripgrep
          ‚Ä¢ fzf: https://github.com/junegunn/fzf
          ‚Ä¢ tldr: https://github.com/tldr-pages/tldr

      setup_aliases:
        type: action
        message: "Setting up convenient aliases..."
        command: |
          SHELL_RC=""
          if [ -f "$HOME/.zshrc" ]; then
            SHELL_RC="$HOME/.zshrc"
          elif [ -f "$HOME/.bashrc" ]; then
            SHELL_RC="$HOME/.bashrc"
          fi
          
          if [ -n "$SHELL_RC" ]; then
            echo ""
            echo "üìù Adding aliases to $SHELL_RC..."
            
            # Check if aliases section exists
            if ! grep -q "# Modern CLI tools aliases" "$SHELL_RC"; then
              cat >> "$SHELL_RC" << 'ALIAS_BLOCK'
          
          # Modern CLI tools aliases
          if command -v bat >/dev/null 2>&1; then
            alias cat='bat'
          elif command -v batcat >/dev/null 2>&1; then
            alias cat='batcat'
          fi
          
          if command -v eza >/dev/null 2>&1; then
            alias ls='eza --icons'
            alias ll='eza -l --icons --git'
            alias la='eza -la --icons --git'
            alias lt='eza --tree --icons'
          elif command -v exa >/dev/null 2>&1; then
            alias ls='exa --icons'
            alias ll='exa -l --icons --git'
            alias la='exa -la --icons --git'
            alias lt='exa --tree --icons'
          fi
          
          if command -v fd >/dev/null 2>&1; then
            alias find='fd'
          fi
          
          if command -v rg >/dev/null 2>&1; then
            alias grep='rg'
          fi
          ALIAS_BLOCK
              echo "  ‚úÖ Aliases added"
            else
              echo "  ‚úÖ Aliases already configured"
            fi
          fi
        next: show_summary

      show_summary:
        type: terminal
        message: |
          
          ==========================================
            Modern CLI Tools Installed!
          ==========================================
          
          Installed tools:
            ‚Ä¢ bat: $(command -v bat >/dev/null 2>&1 && echo "‚úÖ $(bat --version | head -1)" || echo "‚ùå not installed")
            ‚Ä¢ eza: $(command -v eza >/dev/null 2>&1 && echo "‚úÖ installed" || echo "‚ùå not installed")
            ‚Ä¢ fd: $(command -v fd >/dev/null 2>&1 && echo "‚úÖ $(fd --version | head -1)" || echo "‚ùå not installed")
            ‚Ä¢ ripgrep: $(command -v rg >/dev/null 2>&1 && echo "‚úÖ $(rg --version | head -1)" || echo "‚ùå not installed")
            ‚Ä¢ fzf: $(command -v fzf >/dev/null 2>&1 && echo "‚úÖ $(fzf --version)" || echo "‚ùå not installed")
            ‚Ä¢ tldr: $(command -v tldr >/dev/null 2>&1 && echo "‚úÖ installed" || echo "‚ùå not installed")
            ‚Ä¢ htop: $(command -v htop >/dev/null 2>&1 && echo "‚úÖ installed" || echo "‚ùå not installed")
            ‚Ä¢ btop: $(command -v btop >/dev/null 2>&1 && echo "‚úÖ installed" || echo "‚ùå not installed")
          
          Aliases configured (restart shell or run 'source ~/.bashrc'):
            ‚Ä¢ cat ‚Üí bat (syntax highlighted cat)
            ‚Ä¢ ls ‚Üí eza (colorful ls with icons)
            ‚Ä¢ ll ‚Üí eza -l (detailed list)
            ‚Ä¢ la ‚Üí eza -la (all files)
            ‚Ä¢ lt ‚Üí eza --tree (tree view)
            ‚Ä¢ find ‚Üí fd (faster find)
            ‚Ä¢ grep ‚Üí rg (faster grep)
          
          Quick examples:
            ‚Ä¢ bat README.md        - View file with highlighting
            ‚Ä¢ eza -l              - List files with details
            ‚Ä¢ fd pattern          - Find files matching pattern
            ‚Ä¢ rg "search term"    - Search in files recursively
            ‚Ä¢ fzf                 - Interactive fuzzy finder
            ‚Ä¢ Ctrl+R              - Fuzzy history search (with fzf)
            ‚Ä¢ tldr tar            - Quick examples for tar
            ‚Ä¢ htop                - Interactive process viewer
            ‚Ä¢ btop                - Beautiful system monitor
          
          üéâ Enjoy your modern CLI experience!

metadata:
  author: TheMobileProf
  license: MIT
