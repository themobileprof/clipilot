name: check_command_exists
id: org.themobileprof.check_command_exists
version: 1.0.0
description: Check if a command or program is available on the system
tags: [system-ops, atomic, validation, utility]
provides:
  - command_checked
requires: []
size_kb: 2

flows:
  main:
    start: check_cmd
    steps:
      check_cmd:
        type: action
        message: "Checking if command exists: {{.command}}"
        command: |
          CMD="{{.command}}"
          
          echo "üîç Checking for command: $CMD"
          echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
          echo ""
          
          if command -v "$CMD" >/dev/null 2>&1; then
            echo "‚úÖ Command found: $CMD"
            echo ""
            echo "Location:"
            which "$CMD" 2>/dev/null || command -v "$CMD"
            echo ""
            echo "Version (if available):"
            "$CMD" --version 2>/dev/null || "$CMD" -v 2>/dev/null || echo "  (version info not available)"
            echo "FOUND"
          else
            echo "‚ùå Command not found: $CMD"
            echo ""
            echo "üí° Installation suggestions:"
            echo ""
            
            # Provide installation hints based on common tools
            case "$CMD" in
              git)
                echo "  ‚Ä¢ Debian/Ubuntu: sudo apt install git"
                echo "  ‚Ä¢ Fedora/RHEL:   sudo dnf install git"
                echo "  ‚Ä¢ macOS:         brew install git"
                echo "  ‚Ä¢ Termux:        pkg install git"
                ;;
              docker)
                echo "  ‚Ä¢ See: https://docs.docker.com/get-docker/"
                echo "  ‚Ä¢ Debian/Ubuntu: sudo apt install docker.io"
                echo "  ‚Ä¢ Fedora:        sudo dnf install docker"
                ;;
              python*|python3)
                echo "  ‚Ä¢ Debian/Ubuntu: sudo apt install python3"
                echo "  ‚Ä¢ Fedora:        sudo dnf install python3"
                echo "  ‚Ä¢ macOS:         brew install python3"
                echo "  ‚Ä¢ Termux:        pkg install python"
                ;;
              node|nodejs)
                echo "  ‚Ä¢ Debian/Ubuntu: sudo apt install nodejs npm"
                echo "  ‚Ä¢ Fedora:        sudo dnf install nodejs"
                echo "  ‚Ä¢ macOS:         brew install node"
                echo "  ‚Ä¢ Termux:        pkg install nodejs"
                ;;
              *)
                echo "  ‚Ä¢ Try: apt search $CMD (Debian/Ubuntu)"
                echo "  ‚Ä¢ Try: dnf search $CMD (Fedora/RHEL)"
                echo "  ‚Ä¢ Try: brew search $CMD (macOS)"
                echo "  ‚Ä¢ Try: pkg search $CMD (Termux)"
                ;;
            esac
            echo "NOT_FOUND"
          fi
        next: end
      
      end:
        type: terminal
        message: "Command check complete"
